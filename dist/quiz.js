var t,e,n,o,r,s,i,a,u,c,d,l,f,h,g,m;import{getJson as y}from"./common.js";for(r in f=()=>{var t,n,o,r,s;if(document.getElementById("question-number").textContent=`Question ${u+1} of ${c.length}`,document.getElementById("question-text").textContent=c[u].question,c[u].yesno){for(n in o=[],e)switch(s=e[n],t=document.getElementById("button-"+n),s){case 1:o.push(t.textContent="Yes");break;case-1:o.push(t.textContent="No");break;default:o.push(t.style.display="none")}return o}for(n in r=[],e)switch(s=e[n],t=document.getElementById("button-"+n),s){case 1:r.push(t.textContent="Strongly Agree");break;case-1:r.push(t.textContent="Strongly Disagree");break;default:r.push(t.style.display="block")}return r},n=()=>{var t,e,n,o,r,s;for(t=[],e=n=0,o=(r=Object.keys(h)).length;n<o;e=++n)s=r[e],t.push((100*(i[s]+h[s])/(2*i[s])).toFixed(1));return window.location.href="results.html?score="+t.join(",")+(g?"&edition=s":"edition=f")},a=e=>{var o,r,s;for(o in t[u]=e,r=c[u].effect)s=r[o],h[o]+=s*e;return++u>=c.length?n():f()},g="?s"===document.location.search,c=await y("questions"),g&&(c=c.filter((t=>t.short))),t=Array(c.length),i={},h={},u=0,d=c[0].effect)m=d[r],h[r]=0,i[r]=0;for(o=0,s=c.length;o<s;o++)for(r in l=c[o].effect)m=l[r],i[r]+=Math.abs(m);for(r in e={stag:1,ag:.5,neut:0,disag:-.5,stdisag:-1})m=e[r],((t,e)=>{document.getElementById("button-"+t).addEventListener("click",(()=>a(e)))})(r,m);document.getElementById("back_button").addEventListener("click",(()=>{var e;if(0===u)return window.history.back();for(r in u--,e=c[u].effect)m=e[r],h[r]-=t[u]*m;return f()})),f();