{"version":3,"names":["Canvas","getJson","async","name","fetch","json","constructor","element","height","width","fg","bg","this","ctx","getContext","fillStyle","fillRect","drawValueBg","index","strokeStyle","lineJoin","lineWidth","strokeRect","drawValues","value","_this","left_image","right_image","Image","src","icons","addEventListener","drawImage","drawScoreRect","scores","values","score","color1","color2","colors","ext1","ext2","v","val1","val2","color","static","val","i","j","len","ranges","length","drawScoreLabel","font","Error","white_label","textAlign","fillText","toFixed","charAt","toUpperCase","slice","tiers","findTier","drawHeader","params","user","gallery","version","edition","clearFields"],"sources":["..\\/src\\common.coffee"],"sourcesContent":["getJson = (name) ->\r\n    obj = await fetch \"./dist/\" + name + \".json\"\r\n    return obj.json()\r\n\r\nclass Canvas\r\n    constructor: (@element,height,width,@fg,@bg) ->\r\n        @element.height = height\r\n        @element.width = width\r\n        @ctx = @element.getContext \"2d\"\r\n        @ctx.fillStyle = @bg\r\n        @ctx.fillRect 0, 0, width, height\r\n\r\n    drawValueBg: (index) ->\r\n        @ctx.strokeStyle = \"#000\"\r\n        @ctx.lineJoin = \"round\"\r\n        @ctx.lineWidth = 75\r\n        @ctx.fillStyle = \"#222222\"\r\n\r\n        height = 170 + index*120\r\n        @ctx.strokeRect 165, 50+height, 470, 0\r\n\r\n    drawValues: (value, index) ->\r\n        _this = this\r\n        height = 170 + index*120\r\n\r\n        left_image = new Image \r\n        left_image.src = \"./assets/values/\" + value.icons[0]\r\n        left_image.addEventListener \"load\", ->\r\n            _this.ctx.drawImage left_image, 20, height, 100, 100\r\n\r\n        right_image = new Image \r\n        right_image.src = \"./assets/values/\" + value.icons[1]\r\n        right_image.addEventListener \"load\", ->\r\n            _this.ctx.drawImage right_image, 680, height, 100, 100\r\n\r\n    drawScoreRect: (scores, values, score, index) ->\r\n        @ctx.lineWidth = 65\r\n        v = scores[score]\r\n        height = 220 + index*120\r\n        colors = values[index].color\r\n\r\n        [color1,color2] = if v > 50 then [colors[1],colors[0]] else [colors[0],colors[1]]\r\n        [val1,val2] = if v > 50 then [636-4.72*(100-v),166] else [166,636-4.72*(100-v)]\r\n        [ext1,ext2] = if v > 50 then [4.72*(100-v)-2,4.72*v-2] else [4.72*v-2,4.72*(100-v)-2]\r\n\r\n        @ctx.strokeStyle = color1\r\n        @ctx.strokeRect val1, height, ext1, 0\r\n        @ctx.strokeStyle = color2\r\n        @ctx.strokeRect val2, height, ext2, 0\r\n\r\n\r\n    @findTier: (val) ->\r\n        ranges = [0,5,15,25,35,45,55,65,75,85,95]\r\n        for r,i in ranges\r\n            if val < ranges[i]\r\n                return ranges.length - i\r\n        return 0\r\n\r\n\r\n    drawScoreLabel: (val, values, index) ->\r\n        @ctx.font = \"50px Source Sans Pro\"\r\n        height = index*120 + 237.5\r\n        if val is null or val > 100 or val < 0\r\n            throw new Error \"Invalid score: \" + val\r\n\r\n        if val > 30\r\n            @ctx.fillStyle = if values[index].white_label[0] then \"#FFF\" else \"#000\"\r\n            @ctx.textAlign = \"left\"\r\n            @ctx.fillText val.toFixed(1) + \"%\", 150, height\r\n        \r\n        if val < 70\r\n            @ctx.fillStyle = if values[index].white_label[1] then \"#FFF\" else \"#000\"\r\n            @ctx.textAlign = \"right\"\r\n            @ctx.fillText (100 - val).toFixed(1) + \"%\", 650, height\r\n\r\n        @ctx.fillStyle = @fg\r\n        @ctx.textAlign = \"center\"\r\n        @ctx.font=\"bold 30px Source Sans Pro\"\r\n        name =  do values[index].name.charAt(0).toUpperCase + values[index].name.slice 1\r\n        @ctx.fillText name + \" Axis: \" + values[index].tiers[ Canvas.findTier(val)], 400, 170+index*120, 550\r\n\r\n\r\n    drawHeader: (params) ->\r\n        @ctx.fillStyle = @fg\r\n        @ctx.font = \"700 50px Source Sans Pro\"\r\n        @ctx.textAlign = \"left\"\r\n        @ctx.fillText \"PolcompballValues\", 20, 90\r\n\r\n        @ctx.font = \"30px Source Sans Pro\"\r\n        user = if not params.gallery then \\ \r\n        \"Closest match: \" + params.user else params.user\r\n        @ctx.fillText user, 20, 130, 700\r\n\r\n        @ctx.textAlign = \"right\"\r\n        @ctx.font = \"300 25px Source Sans Pro\"\r\n        @ctx.fillText \"polcompballvalues.github.io\", 780, 40\r\n        @ctx.fillText params.version, 780, 70\r\n        @ctx.fillText params.edition, 780, 100\r\n    \r\n    clearFields: ->\r\n        @ctx.fillStyle = @bg\r\n        @ctx.fillRect 126,130,550,1730\r\n        @ctx.fillRect 0,0,800,150\r\n\r\nexport {getJson, Canvas}"],"mappings":"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"}