var e,t,o,r,n,s,a,l,i;i=0,s=document.querySelector("lottie-player"),t=e=>{var t;if(confirm("Automatic submission of your scores failed, do you wish to download a copy of the scores to submit manually to the developers?"))return(t=document.createElement("a")).href="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),t.download="scores.json",t.click()},n=()=>(s.load("./assets/85185-checkmark.json"),s.style.display="block",s.play(),s.addEventListener("complete",(()=>s.style.display="none"))),r=e=>(s.load("./assets/94303-failed.json"),s.style.display="block",s.play(),s.addEventListener("complete",(()=>(s.style.display="none",t(e))))),o=()=>{var e;if(14!==(e=(new URLSearchParams(document.location.search).get("score")||"").split(",").map((e=>parseFloat(e)))).length)throw Error("Invalid scores");if(!e.every((e=>e>=0&&e<=100)))throw Error("Invalid scores");return e},e=t=>{var o,r;return null==(o=t.trim())||""===o?(r=prompt("You did not enter a username, please enter one and submit."),e(r)):t},l=e=>{var t,s,a,l,c;try{l={name:e,vals:o()}}catch(e){return console.error(s=e),void alert(s)}return t=new AbortController,c=setTimeout((()=>t.abort()),1e4),a={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},signal:t.signal,body:JSON.stringify(l)},fetch("https://pcbval.theghostofinky.repl.co/api/",a).then((e=>(clearTimeout(c),e.json()))).then((e=>e.success?(i++,n()):r(l))).catch((e=>(console.error(e),r(l))))},a=()=>{var t,o;if(o=document.getElementById("name").value.trim(),i>0){if(confirm("You already submitted your scores, do you wish to submit a new time?"))return t=e(o),l(t)}else if(t=e(o),confirm(`Do you confirm you wish to submit your scores under the name of "${t}"?`))return l(t)},document.getElementById("name").addEventListener("keydown",(e=>{if(13===e.keyCode)return e.preventDefault(),a()})),document.getElementById("send-button").addEventListener("click",(()=>a()));
//# sourceMappingURL=submitter.js.map