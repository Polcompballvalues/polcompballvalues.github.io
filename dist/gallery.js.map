{"version":3,"names":["bg","canvas","canvas_elm","drawScores","fg","i","ind","j","k","len","len1","params","user","user_dropdown","users","val","values","Canvas","getJson","gallery","edition","version","window","VERSION","document","getElementById","matchMedia","matches","user_obj","full_pars","ref","scores","scr","clearFields","name","Object","stats","keys","length","drawValueBg","drawScoreRect","drawScoreLabel","drawHeader","addEventListener","selectedIndex","innerHTML","drawValues","setTimeout","event","Event","dispatchEvent"],"sources":["..\\/src\\coffeescript\\gallery.coffee"],"sourcesContent":["import {Canvas,getJson} from \"./common.js\"\r\n\r\nvalues = await getJson \"values\"\r\nusers = await getJson \"users\" \r\n\r\nparams =\r\n    gallery : true\r\n    edition : \"User gallery\"\r\n    version : window.VERSION\r\n\r\ncanvas_elm = document.getElementById \"banner\"\r\n\r\n[bg,fg] = if window.matchMedia(\"(prefers-color-scheme: dark)\").matches \\\r\n    then [\"#333\",\"#EEE\"] else [\"#EEE\",\"#333\"]\r\n\r\ncanvas = new Canvas canvas_elm,1860,800,fg,bg\r\n\r\ndrawScores = (user_obj) ->\r\n    do canvas.clearFields\r\n    full_pars = {\r\n        ...params\r\n        user : user_obj.name\r\n    }\r\n    scores = Object.values user_obj.stats\r\n    for scr,ind in Object.keys scores\r\n        canvas.drawValueBg ind\r\n        canvas.drawScoreRect scores,values,scr,ind\r\n        canvas.drawScoreLabel scores[scr],values,ind\r\n\r\n    canvas.drawHeader full_pars\r\n\r\nuser_dropdown = document.getElementById(\"userdropdown\")\r\n\r\nuser_dropdown.addEventListener \"change\", ->\r\n    drawScores users[user_dropdown.selectedIndex]\r\n\r\nfor user,i in users\r\n    user_dropdown.innerHTML += \"<option value=#{i}>#{user.name}</option>\"\r\n\r\nfor val,ind in values\r\n    canvas.drawValues val,ind\r\n\r\nsetTimeout (->\r\n    event = new Event \"load\"\r\n    window.dispatchEvent event\r\n    drawScores users[0]\r\n    ), 300\r\n\r\n"],"mappings":"AAAA,IAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,mBAAQC,aAAOC,MAAf,cAoCA,IAlCAF,QAAeE,EAAQ,UACvBJ,QAAcI,EAAQ,SAEtBP,EACI,CAAAQ,SAAU,EACVC,QAAU,eACVC,QAAUC,OAAOC,SAErBrB,EAAasB,SAASC,eAAe,WAEpCzB,EAAGI,GAASkB,OAAOI,WAAW,gCAAgCC,QACtD,CAAC,OAAO,QAAa,CAAC,OAAO,QAEtC1B,EAAS,IAAIgB,EAAOf,EAAW,KAAK,IAAIE,EAAGJ,GAE3CG,EAAcyB,IACd,IAAAC,EAAAvB,EAAAC,EAAAE,EAAAqB,EAAAC,EAAAC,EAMI,IANG/B,EAAOgC,cACVJ,EAAY,IACLlB,EACHC,KAAOgB,EAASM,MAEpBH,EAASI,OAAOnB,OAAOY,EAASQ,OAChC9B,EAAAC,EAAA,EAAAE,GAAAqB,EAAAK,OAAAE,KAAAN,IAAAO,OAAA/B,EAAAE,EAAAH,IAAAC,E,OACIN,EAAOsC,YAAYjC,GACnBL,EAAOuC,cAAcT,EAAOf,EAAOgB,EAAI1B,GACvCL,EAAOwC,eAAeV,EAAOC,GAAKhB,EAAOV,G,OAE7CL,EAAOyC,WAAWb,EAZT,GAcbhB,EAAgBW,SAASC,eAAe,iBAE1BkB,iBAAiB,UAAU,IACrCxC,EAAWW,EAAMD,EAAc+B,kBAEnCvC,EAAAE,EAAA,EAAAE,EAAAK,EAAAwB,OAAA/B,EAAAE,EAAAJ,IAAAE,E,OACIM,EAAcgC,WAAa,iBAAiBxC,KAAKO,EAAKsB,gBAE1D,IAAA5B,EAAAE,EAAA,EAAAE,EAAAM,EAAAsB,OAAA9B,EAAAE,EAAAJ,IAAAE,E,OACIP,EAAO6C,WAAW/B,EAAIT,GAE1ByC,YAAW,KACX,IAAAC,E,OAAIA,EAAQ,IAAIC,MAAM,QAClB3B,OAAO4B,cAAcF,GACrB7C,EAAWW,EAAM,GAHV,GAIJ"}