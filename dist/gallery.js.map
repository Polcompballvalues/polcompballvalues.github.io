{"version":3,"names":["bg","canvas","canvas_elm","drawScores","fg","i","ind","j","k","len","len1","params","user","user_dropdown","users","val","values","Canvas","getJson","gallery","edition","version","globalThis","VERSION","document","getElementById","window","matchMedia","matches","user_obj","full_pars","ref","scores","scr","clearFields","name","Object","stats","keys","length","drawValueBg","drawScoreRect","drawScoreLabel","drawHeader","addEventListener","selectedIndex","innerHTML","drawValues","setTimeout","event","Event","dispatchEvent"],"sources":["..\\/src\\coffeescript\\gallery.coffee"],"sourcesContent":["import {Canvas,getJson} from \"./common.js\"\r\n\r\nvalues = await getJson \"values\"\r\nusers = await getJson \"users\" \r\n\r\nparams =\r\n    gallery : true\r\n    edition : \"User gallery\"\r\n    version : globalThis.VERSION\r\n\r\ncanvas_elm = document.getElementById \"banner\"\r\n\r\n[bg,fg] = if window.matchMedia(\"(prefers-color-scheme: dark)\").matches \\\r\n    then [\"#333\",\"#EEE\"] else [\"#EEE\",\"#333\"]\r\n\r\ncanvas = new Canvas canvas_elm,1860,800,fg,bg\r\n\r\ndrawScores = (user_obj) ->\r\n    do canvas.clearFields\r\n    full_pars = {\r\n        ...params\r\n        user : user_obj.name\r\n    }\r\n    scores = Object.values user_obj.stats\r\n    for scr,ind in Object.keys scores\r\n        canvas.drawValueBg ind\r\n        canvas.drawScoreRect scores,values,scr,ind\r\n        canvas.drawScoreLabel scores[scr],values,ind\r\n\r\n    canvas.drawHeader full_pars\r\n\r\nuser_dropdown = document.getElementById(\"userdropdown\")\r\n\r\nuser_dropdown.addEventListener \"change\", ->\r\n    drawScores users[user_dropdown.selectedIndex]\r\n\r\nfor user,i in users\r\n    user_dropdown.innerHTML += \"<option value=#{i}>#{user.name}</option>\"\r\n\r\nfor val,ind in values\r\n    canvas.drawValues val,ind\r\n\r\nsetTimeout (->\r\n    event = new Event \"load\"\r\n    window.dispatchEvent event\r\n    drawScores users[0]\r\n    ), 300\r\n\r\n"],"mappings":"AAAA,IAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,mBAAQC,aAAOC,MAAf,cAoCA,IAlCAF,QAAeE,EAAQ,UACvBJ,QAAcI,EAAQ,SAEtBP,EACI,CAAAQ,SAAU,EACVC,QAAU,eACVC,QAAUC,WAAWC,SAEzBrB,EAAasB,SAASC,eAAe,WAEpCzB,EAAGI,GAASsB,OAAOC,WAAW,gCAAgCC,QACtD,CAAC,OAAO,QAAa,CAAC,OAAO,QAEtC3B,EAAS,IAAIgB,EAAOf,EAAW,KAAK,IAAIE,EAAGJ,GAE3CG,EAAc0B,IACd,IAAAC,EAAAxB,EAAAC,EAAAE,EAAAsB,EAAAC,EAAAC,EAMI,IANGhC,EAAOiC,cACVJ,EAAY,IACLnB,EACHC,KAAOiB,EAASM,MAEpBH,EAASI,OAAOpB,OAAOa,EAASQ,OAChC/B,EAAAC,EAAA,EAAAE,GAAAsB,EAAAK,OAAAE,KAAAN,IAAAO,OAAAhC,EAAAE,EAAAH,IAAAC,E,OACIN,EAAOuC,YAAYlC,GACnBL,EAAOwC,cAAcT,EAAOhB,EAAOiB,EAAI3B,GACvCL,EAAOyC,eAAeV,EAAOC,GAAKjB,EAAOV,G,OAE7CL,EAAO0C,WAAWb,EAZT,GAcbjB,EAAgBW,SAASC,eAAe,iBAE1BmB,iBAAiB,UAAU,IACrCzC,EAAWW,EAAMD,EAAcgC,kBAEnCxC,EAAAE,EAAA,EAAAE,EAAAK,EAAAyB,OAAAhC,EAAAE,EAAAJ,IAAAE,E,OACIM,EAAciC,WAAa,iBAAiBzC,KAAKO,EAAKuB,gBAE1D,IAAA7B,EAAAE,EAAA,EAAAE,EAAAM,EAAAuB,OAAA/B,EAAAE,EAAAJ,IAAAE,E,OACIP,EAAO8C,WAAWhC,EAAIT,GAE1B0C,YAAW,KACX,IAAAC,E,OAAIA,EAAQ,IAAIC,MAAM,QAClBxB,OAAOyB,cAAcF,GACrB9C,EAAWW,EAAM,GAHV,GAIJ"}